<!-- Job Order Dashboard HTML Template -->
<div class="job-dashboard-container" id="job-dashboard">
    <!-- Dashboard Header -->
    <div class="page-header">
        <div class="page-title">
            <h1>{{ _("Job Order Dashboard") }}</h1>
            <p class="text-muted">{{ _("Comprehensive overview of job orders, phases, and performance metrics") }}</p>
        </div>
        <div class="page-actions">
            <button class="btn btn-primary" id="refresh-dashboard">
                <i class="fa fa-refresh"></i> {{ _("Refresh") }}
            </button>
            <button class="btn btn-default" id="export-dashboard">
                <i class="fa fa-download"></i> {{ _("Export") }}
            </button>
        </div>
    </div>

    <!-- Dashboard Navigation Tabs -->
    <div class="dashboard-tabs">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="overview-tab" data-toggle="tab" href="#overview" role="tab">
                    <i class="fa fa-dashboard"></i> {{ _("Overview") }}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="kanban-tab" data-toggle="tab" href="#kanban" role="tab">
                    <i class="fa fa-columns"></i> {{ _("Kanban") }}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="calendar-tab" data-toggle="tab" href="#calendar" role="tab">
                    <i class="fa fa-calendar"></i> {{ _("Calendar") }}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="analytics-tab" data-toggle="tab" href="#analytics" role="tab">
                    <i class="fa fa-bar-chart"></i> {{ _("Analytics") }}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="list-tab" data-toggle="tab" href="#list" role="tab">
                    <i class="fa fa-list"></i> {{ _("List View") }}
                </a>
            </li>
        </ul>
    </div>

    <!-- Tab Content -->
    <div class="tab-content dashboard-content">
        <!-- Overview Tab -->
        <div class="tab-pane fade show active" id="overview" role="tabpanel">
            <div class="dashboard-overview">
                <!-- Summary Cards -->
                <div class="row summary-cards">
                    <div class="col-md-3">
                        <div class="card summary-card total-jobs">
                            <div class="card-body">
                                <div class="summary-icon">
                                    <i class="fa fa-briefcase"></i>
                                </div>
                                <div class="summary-content">
                                    <h3 id="total-jobs-count">-</h3>
                                    <p>{{ _("Total Jobs") }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card summary-card active-jobs">
                            <div class="card-body">
                                <div class="summary-icon">
                                    <i class="fa fa-play-circle"></i>
                                </div>
                                <div class="summary-content">
                                    <h3 id="active-jobs-count">-</h3>
                                    <p>{{ _("Active Jobs") }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card summary-card completed-jobs">
                            <div class="card-body">
                                <div class="summary-icon">
                                    <i class="fa fa-check-circle"></i>
                                </div>
                                <div class="summary-content">
                                    <h3 id="completed-jobs-count">-</h3>
                                    <p>{{ _("Completed Jobs") }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card summary-card completion-rate">
                            <div class="card-body">
                                <div class="summary-icon">
                                    <i class="fa fa-percentage"></i>
                                </div>
                                <div class="summary-content">
                                    <h3 id="completion-rate">-</h3>
                                    <p>{{ _("Completion Rate") }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="row charts-row">
                    <div class="col-md-6">
                        <div class="card chart-card">
                            <div class="card-header">
                                <h5>{{ _("Phase Distribution") }}</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="phase-distribution-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card chart-card">
                            <div class="card-header">
                                <h5>{{ _("Priority Distribution") }}</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="priority-distribution-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity and Alerts -->
                <div class="row activity-row">
                    <div class="col-md-8">
                        <div class="card activity-card">
                            <div class="card-header">
                                <h5>{{ _("Recent Jobs") }}</h5>
                                <a href="#" id="view-all-jobs" class="btn btn-sm btn-outline-primary">
                                    {{ _("View All") }}
                                </a>
                            </div>
                            <div class="card-body">
                                <div id="recent-jobs-list" class="activity-list">
                                    <!-- Recent jobs will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card alerts-card">
                            <div class="card-header">
                                <h5>{{ _("Alerts & Overdue") }}</h5>
                            </div>
                            <div class="card-body">
                                <div id="alerts-list">
                                    <!-- Alerts will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Metrics -->
                <div class="row performance-row">
                    <div class="col-md-12">
                        <div class="card performance-card">
                            <div class="card-header">
                                <h5>{{ _("Performance Metrics") }}</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="metric">
                                            <h4 id="avg-completion-days">-</h4>
                                            <p>{{ _("Avg. Completion Days") }}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric">
                                            <h4 id="on-time-rate">-</h4>
                                            <p>{{ _("On-Time Rate") }}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric">
                                            <h4 id="total-value">-</h4>
                                            <p>{{ _("Total Project Value") }}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric">
                                            <h4 id="pending-value">-</h4>
                                            <p>{{ _("Pending Value") }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Kanban Tab -->
        <div class="tab-pane fade" id="kanban" role="tabpanel">
            <div class="kanban-container">
                <div class="kanban-filters">
                    <div class="row">
                        <div class="col-md-3">
                            <select class="form-control" id="kanban-customer-filter">
                                <option value="">{{ _("All Customers") }}</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-control" id="kanban-priority-filter">
                                <option value="">{{ _("All Priorities") }}</option>
                                <option value="Urgent">{{ _("Urgent") }}</option>
                                <option value="High">{{ _("High") }}</option>
                                <option value="Medium">{{ _("Medium") }}</option>
                                <option value="Low">{{ _("Low") }}</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-control" id="kanban-date-filter">
                                <option value="">{{ _("All Time") }}</option>
                                <option value="this_week">{{ _("This Week") }}</option>
                                <option value="this_month">{{ _("This Month") }}</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary" id="apply-kanban-filters">
                                {{ _("Apply Filters") }}
                            </button>
                        </div>
                    </div>
                </div>
                <div id="kanban-board" class="kanban-board">
                    <!-- Kanban columns will be generated here -->
                </div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div class="tab-pane fade" id="calendar" role="tabpanel">
            <div class="calendar-container">
                <div class="calendar-toolbar">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary" id="calendar-month-view">
                            {{ _("Month") }}
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="calendar-week-view">
                            {{ _("Week") }}
                        </button>
                        <button type="button" class="btn btn-outline-primary active" id="calendar-agenda-view">
                            {{ _("Agenda") }}
                        </button>
                    </div>
                    <div class="calendar-navigation">
                        <button class="btn btn-outline-secondary" id="calendar-prev">
                            <i class="fa fa-chevron-left"></i>
                        </button>
                        <span id="calendar-title" class="calendar-title">{{ _("Loading...") }}</span>
                        <button class="btn btn-outline-secondary" id="calendar-next">
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div id="job-calendar" class="calendar-view">
                    <!-- Calendar will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div class="tab-pane fade" id="analytics" role="tabpanel">
            <div class="analytics-container">
                <div class="analytics-filters">
                    <div class="row">
                        <div class="col-md-4">
                            <select class="form-control" id="analytics-period">
                                <option value="30">{{ _("Last 30 Days") }}</option>
                                <option value="60">{{ _("Last 60 Days") }}</option>
                                <option value="90">{{ _("Last 90 Days") }}</option>
                                <option value="180">{{ _("Last 6 Months") }}</option>
                                <option value="365">{{ _("Last Year") }}</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-primary" id="refresh-analytics">
                                {{ _("Refresh Analytics") }}
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Analytics Charts -->
                <div class="row analytics-charts">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>{{ _("Phase Duration Trends") }}</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="phase-duration-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>{{ _("Revenue Trends") }}</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="revenue-trend-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row analytics-charts">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>{{ _("Bottleneck Analysis") }}</h5>
                            </div>
                            <div class="card-body">
                                <div id="bottleneck-analysis">
                                    <!-- Bottleneck data will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>{{ _("Customer Performance") }}</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="customer-performance-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- List View Tab -->
        <div class="tab-pane fade" id="list" role="tabpanel">
            <div class="list-container">
                <div class="list-toolbar">
                    <div class="row">
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="job-search" placeholder="{{ _('Search jobs...') }}">
                        </div>
                        <div class="col-md-2">
                            <select class="form-control" id="list-phase-filter">
                                <option value="">{{ _("All Phases") }}</option>
                                <option value="Submission">{{ _("Submission") }}</option>
                                <option value="Estimation">{{ _("Estimation") }}</option>
                                <option value="Client Approval">{{ _("Client Approval") }}</option>
                                <option value="Planning">{{ _("Planning") }}</option>
                                <option value="Prework">{{ _("Prework") }}</option>
                                <option value="Execution">{{ _("Execution") }}</option>
                                <option value="Review">{{ _("Review") }}</option>
                                <option value="Invoicing">{{ _("Invoicing") }}</option>
                                <option value="Closeout">{{ _("Closeout") }}</option>
                                <option value="Archived">{{ _("Archived") }}</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-control" id="list-priority-filter">
                                <option value="">{{ _("All Priorities") }}</option>
                                <option value="Urgent">{{ _("Urgent") }}</option>
                                <option value="High">{{ _("High") }}</option>
                                <option value="Medium">{{ _("Medium") }}</option>
                                <option value="Low">{{ _("Low") }}</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-primary" id="apply-list-filters">
                                {{ _("Filter") }}
                            </button>
                        </div>
                        <div class="col-md-3 text-right">
                            <button class="btn btn-success" id="create-new-job">
                                <i class="fa fa-plus"></i> {{ _("New Job Order") }}
                            </button>
                        </div>
                    </div>
                </div>

                <div class="job-list-container">
                    <div class="table-responsive">
                        <table class="table table-hover" id="job-list-table">
                            <thead>
                                <tr>
                                    <th>{{ _("Job Number") }}</th>
                                    <th>{{ _("Customer") }}</th>
                                    <th>{{ _("Project") }}</th>
                                    <th>{{ _("Phase") }}</th>
                                    <th>{{ _("Priority") }}</th>
                                    <th>{{ _("Start Date") }}</th>
                                    <th>{{ _("Value") }}</th>
                                    <th>{{ _("Status") }}</th>
                                    <th>{{ _("Actions") }}</th>
                                </tr>
                            </thead>
                            <tbody id="job-list-body">
                                <!-- Job list will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="row">
                        <div class="col-md-6">
                            <div id="list-pagination-info" class="pagination-info">
                                <!-- Pagination info will be shown here -->
                            </div>
                        </div>
                        <div class="col-md-6">
                            <nav>
                                <ul class="pagination justify-content-end" id="list-pagination">
                                    <!-- Pagination controls will be generated here -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="dashboard-loading" class="dashboard-loading" style="display: none;">
        <div class="loading-content">
            <div class="spinner-border text-primary" role="status">
                <span class="sr-only">{{ _("Loading...") }}</span>
            </div>
            <p class="mt-2">{{ _("Loading dashboard data...") }}</p>
        </div>
    </div>
</div>

<!-- Job Detail Modal -->
<div class="modal fade" id="job-detail-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="job-detail-title">{{ _("Job Details") }}</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body" id="job-detail-body">
                <!-- Job details will be loaded here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">{{ _("Close") }}</button>
                <button type="button" class="btn btn-primary" id="edit-job-btn">{{ _("Edit Job") }}</button>
            </div>
        </div>
    </div>
</div>